# Gitコミット間比較ツール（ぎっとさぶん）

## 機能概要

- 2つのgitコミットの差分となっているファイル一覧を出力
- 差分となっているファイルをフォルダ構成を保ったまま指定のフォルダにコピーをする
- 修正パッチを当てるときに、修正前のファイルと修正後のファイル（アップロード用）を作成するのに役立つ
- コードレビューでも差分をさっと確認したいときにも活用いただけます

## 利用想定OS環境

- Windows

## 開発言語

- Python

## 更新履歴

| Version | Updated Date | Description                                                                                                 |
| :-----: | :----------: | :---------------------------------------------------------------------------------------------------------- |
|  0.0.1  |  2025-08-13  | 初回                                                                                                        |
|  0.0.2  |  2025-08-14  | ブランチを切り替えずにファイルコピーに仕様変更                                                              |
|  0.0.3  |  2025-08-17  | 起動用のexeファイルに対応<br>db名の定義を定数に変更<br>その他タイポ修正                                     |
|  0.0.4  |  2025-08-19  | 処理数が多いときに、UIスレッドが固まらないようにスレッド処理対応                                            |
|  0.1.0  |  2025-08-23  | コミット間の比較に対応                                                                                      |
|  0.1.1  |  2025-08-25  | レイアウト刷新<br>テーブルの修正（旧バージョン利用中の場合は、git_tool.dbを一旦削除推奨）                   |
|  0.1.2  |  2025-08-26  | ローカルの未コミットの差分を出力できる機能を追加                                                            |
|  0.2.0  |  2025-09-07  | ローカルの未コミットの差分出力機能を修正<br>コピー対象外の設定機能追加<br>exeファイルのプロンプト無効化対応 |
|  0.2.1  |  2025-09-07  | ワークスペース選択モーダルの挙動を修正                                                                      |
|  0.2.2  |  2025-09-08  | コミット一覧取得時のプロンプトを非表示に、起動時の位置補正                                                  |
|  0.2.3  |  2025-09-15  | BugFix（除外パスをすべて消したときに保存できないバグを修正）                                                  |
|  0.2.4  |  2026-01-04  | 実行中のステータス管理と実行中の非活性化対応                                           |
|  0.2.5  |  2026-01-17  | 差分ファイル数のチェックと多い場合の実行確認を行う機能を追加                                           |
|  0.2.6  |  2026-01-18  | ユーザ設定モーダルを追加（取得コミット数、実行確認差分上限を設定できるように機能追加）                                  |

## 機能

- gitのローカルで追跡しているブランチ一覧を取得できる
- gitのローカルで取得したコミット一覧を取得できる（0.2.0では50件まで）
- ２つの任意のブランチ間の差分を取得し、差分ファイルをローカルにコピーできる
- ２つの任意のブランチ間の差分を取得し、差分ファイルをローカルにコピーできる
- ローカルでの変更と最新のコミット（HEAD）との差分を取得し、差分ファイルをローカルにコピーできる
- コピー不要なファイルはパスの部分一致で除外できる

## 使い方

- distフォルダのgitdifftool.exeをローカルの任意のフォルダに格納
- ダブルクリックで実行（流通していないソフトのためウィルス対策ソフトにチェックされる可能性があります）
  - 実行時に同じディレクトリにgit_tool.dbが作成されます
  - データベースはsqliteですので、データベースのクライアントソフトで見ることができます（ユーザIDやパスワードは設定していません）
  - pythonが入っている環境であれば、python3 difftool.pyで起動することもできます
- 起動時にワークスペースを設定します（gitプロジェクト名など）
- ブランチやコミットはそれぞれの更新ボタンをクリックすることで最新の情報を取得します
  - 取得するのはブランチ一覧やコミット一覧であり、ソース自体はこのタイミングでは取得しません
- 比較モードは以下の３種類を用意しています
  - ブランチ間比較
    - ２つのブランチ間の差分リストの作成と差分ファイルのローカルへのコピー
    - コピーーはgit showコマンドを使って指定ブランチのファイルを取得します
  - コミット間比較
    - ２つのコミット間の差分リストの作成と差分ファイルのローカルへのコピー
    - コピーーはgit showコマンドを使って指定コミットのファイルを取得します
  - 未コミット比較
    - ローカルのステージング前のファイルとHEADとの比較をして、その差分リストと差分ファイルのローカルへのコピーを行う
      - ローカルの差分は以下のコマンドを用いて取得しています
        - `git status --untracked-files=all --porcelain`
  - それぞれのコピー時にファイルの存在をチェックし、存在しないファイルはスキップするようにしています
- 差分ファイルのコピーの対象外設定
  - 設定→ワークスペース→コピー対象外設定に改行区切りでパスの一部を指定することで、実行時にコピーをスキップします

## TODO:

- ワークスペースの削除、名前変更機能
- 多言語対応（英語は対応を検討中）
- gitコマンドなどの実行ログを表示できるように改良を検討（現状ターミナルを見ないとエラーなどが見れない）
